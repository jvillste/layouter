(ns layouter.key-log
  (:require
   [clojure.string :as string]
   [clojure.test :refer [deftest is]]
   [com.stuartsierra.frequencies :as frequencies]
   [layouter.layout :as layout]
   [layouter.text :as text]
   [medley.core :as medley]))

(defn parse-key-log [key-log]
  (->> (string/split key-log #",")
       (remove empty?)
       (map string/trim)
       (map (fn [line]
              (map parse-long (string/split line #" "))))
       (map (fn [[keycode time]]
              {:keycode keycode
               :time time}))))

(def key-log-file-path "/Users/jukka/nitor-src/posti/matching/temp/data/keylog.txt")

(def space-cocoa-key-code 49)
(def back-space-cocoa-key-code 51)
(def second-in-microseconds 1000000)

(defn apply-back-spaces [events]
  (reduce (fn [events event]
            (if (= (:keycode event) back-space-cocoa-key-code)
              (if (empty? events)
                events
                (pop events))
              (conj events event)))
          []
          events))

(deftest test-apply-back-spaces
  (is (= (apply-back-spaces [{:keycode 1}
                             {:keycode 2}
                             {:keycode 3}])

         (apply-back-spaces [{:keycode 1}
                             {:keycode 5}
                             {:keycode 6}
                             {:keycode back-space-cocoa-key-code}
                             {:keycode back-space-cocoa-key-code}
                             {:keycode 2}
                             {:keycode 3}]))))

(defn key-log-to-string [parsed-log minimum-pause-for-inserting-space]
  (->> parsed-log
       (sort-by :time)
       (apply-back-spaces)
       (partition-all 2 1)
       (mapcat (fn [[event following-event]]
                 (if (and following-event
                          (<= minimum-pause-for-inserting-space
                              (- (:time following-event)
                                 (:time event))))
                   [event
                    {:keycode space-cocoa-key-code
                     :time (inc (:time event))}]
                   [event])))
       (map :keycode)
       (map (->> (assoc (layout/layout-to-cocoa-key-code-to-character layout/qwerty)
                        space-cocoa-key-code " "
                        back-space-cocoa-key-code " ")
                 (medley/map-vals #(get {"," " "
                                         "." " "
                                         "-" " "
                                         "<" " "} % %))
                 (medley/remove-vals #{"," "." "-" "<"})))
       (string/join "")))

(deftest test-key-log-to-string
  (is (= "ab c"
         (key-log-to-string (let [character-to-cocoa-key-code (layout/layout-to-character-to-cocoa-key-code layout/qwerty)]
                              [{:keycode (character-to-cocoa-key-code "a"), :time 0}
                               {:keycode (character-to-cocoa-key-code "b"), :time 1}
                               {:keycode (character-to-cocoa-key-code "c"), :time 3}])
                            2))))

(defn key-log-from-file [file-name]
  (-> file-name
      (slurp)
      (parse-key-log)))

(defn key-log-to-string-from-file [file-name]
  (-> (key-log-from-file file-name)
      (key-log-to-string (* 2 second-in-microseconds))))

(defn key-log-to-words-from-file [file-name]
  (remove #(= 1 (count %))
          (-> (key-log-to-string-from-file file-name)
              (string/split #"\s+"))))

;; TODO: keylogger logs characters that were not typed by me
;; keylogger should also log characters rather than keycodes

(comment
  (take-last 10 (key-log-from-file key-log-file-path))

  (key-log-to-string-from-file key-log-file-path)

  (text/text-statistics (string/join " " (key-log-to-words-from-file key-log-file-path)))

  (let [key-pair-means (->> (parse-key-log (slurp key-log-file-path))
                            (filter :down?)
                            (partition 2 1)
                            (map (fn [[a b]]
                                   {:from (key-code-to-character (:keycode a))
                                    :to   (key-code-to-character (:keycode b))
                                    :time (- (:time b)
                                             (:time a))}))
                            (remove (fn [key-pair]
                                      (or (= " " (:from key-pair))
                                          (= " " (:to key-pair))
                                          (= nil (:from key-pair))
                                          (= nil (:to key-pair))
                                          (< 1000000 (:time key-pair))
                                          (= (:from key-pair)
                                             (:to key-pair)))))
                            (group-by (juxt :from :to))
                            (medley/map-vals (fn [key-pairs]
                                               (frequencies/mean (frequencies (map :time key-pairs))))))
        mean           (frequencies/mean (frequencies (vals key-pair-means)))]

    (->> (medley/map-vals (fn [value]
                            (float (/ value mean)))
                          key-pair-means)
         (sort-by second)))

  )

(def key-log-text-statistics '{:name "key log"
                               :digram-distribution
                               {("e" "i") 0.003197769760577238,
                                ("c" "e") 0.001393899639225976,
                                ("w" "e") 0.001475893735651033,
                                ("o" "v") 9.839291571006887E-4,
                                ("a" "t") 0.01188914398163332,
                                ("t" "m") 6.559527714004593E-4,
                                ("o" "k") 0.003689734339127583,
                                ("i" "s") 0.01164316169235815,
                                ("t" "a") 0.01303706133158413,
                                ("h" "i") 0.001557887832076091,
                                ("b" "m") 6.559527714004593E-4,
                                ("n" "s") 0.002541816989176779,
                                ("c" "t") 0.003361757953427353,
                                ("o" "g") 0.001803870121351263,
                                ("r" "j") 6.559527714004593E-4,
                                ("l" "f") 7.379468678255166E-4,
                                ("e" "r") 0.01426697277795999,
                                ("d" "o") 0.003935716628402755,
                                ("a" "i") 0.007133486388979993,
                                ("l" "i") 0.006231551328304362,
                                ("r" "e") 0.01484093145293539,
                                ("p" "h") 8.19940964250574E-4,
                                ("n" "c") 0.001639881928501148,
                                ("ä" "s") 0.001065923253525746,
                                ("e" "y") 0.002705805182026894,
                                ("r" "k") 6.559527714004593E-4,
                                ("l" "e") 0.01131518530665792,
                                ("r" "y") 0.002787799278451951,
                                ("i" "g") 0.003197769760577238,
                                ("f" "e") 0.001557887832076091,
                                ("y" "o") 0.001065923253525746,
                                ("i" "c") 0.001229911446375861,
                                ("y" "l") 0.001393899639225976,
                                ("h" "o") 0.00188586421777632,
                                ("s" "e") 0.009921285667431945,
                                ("o" "r") 0.006723515906854706,
                                ("i" "n") 0.02254837651689078,
                                ("r" "s") 0.002295834699901607,
                                ("s" "ä") 0.001393899639225976,
                                ("o" "d") 0.00377172843555264,
                                ("a" "k") 0.002131846507051492,
                                ("u" "o") 0.002049852410626435,
                                ("e" "p") 0.001147917349950804,
                                ("e" "l") 0.005903574942604133,
                                ("a" "d") 0.004345687110528042,
                                ("t" "h") 0.0105772384388324,
                                ("r" "l") 7.379468678255166E-4,
                                ("h" "ä") 7.379468678255166E-4,
                                ("b" "k") 0.002131846507051492,
                                ("o" "c") 0.001475893735651033,
                                ("s" "p") 0.001229911446375861,
                                ("p" "t") 0.001065923253525746,
                                ("j" "a") 0.003689734339127583,
                                ("v" "o") 9.839291571006887E-4,
                                ("l" "k") 9.839291571006887E-4,
                                ("s" "o") 0.003279763857002296,
                                ("t" "ä") 0.004509675303378157,
                                ("o" "w") 0.004017710724827812,
                                ("p" "o") 0.002787799278451951,
                                ("l" "u") 0.003033781567727124,
                                ("e" "f") 0.003443752049852411,
                                ("w" "h") 0.001065923253525746,
                                ("e" "e") 0.004755657592653329,
                                ("n" "k") 0.003279763857002296,
                                ("c" "a") 0.004345687110528042,
                                ("u" "u") 0.002131846507051492,
                                ("o" "i") 0.004263693014102985,
                                ("t" "i") 0.01164316169235815,
                                ("g" "i") 0.002295834699901607,
                                ("b" "r") 0.001065923253525746,
                                ("u" "e") 0.002377828796326664,
                                ("s" "t") 0.01607084289931125,
                                ("i" "r") 0.002459822892751722,
                                ("j" "ä") 7.379468678255166E-4,
                                ("f" "r") 0.00188586421777632,
                                ("i" "l") 0.005739586749754018,
                                ("t" "o") 0.00877336831748114,
                                ("t" "y") 0.001065923253525746,
                                ("g" "q") 8.19940964250574E-4,
                                ("m" "e") 0.00877336831748114,
                                ("l" "d") 9.839291571006887E-4,
                                ("h" "a") 0.007379468678255166,
                                ("o" "j") 8.19940964250574E-4,
                                ("n" "d") 0.004181698917677927,
                                ("c" "i") 9.839291571006887E-4,
                                ("s" "c") 0.003033781567727124,
                                ("d" "a") 0.002131846507051492,
                                ("ä" "m") 9.019350606756314E-4,
                                ("h" "y") 7.379468678255166E-4,
                                ("s" "u") 0.004673663496228272,
                                ("h" "e") 0.01024926205313217,
                                ("r" "t") 0.00188586421777632,
                                ("a" "m") 0.003525746146277468,
                                ("a" "g") 7.379468678255166E-4,
                                ("i" "h") 7.379468678255166E-4,
                                ("i" "o") 0.006149557231879305,
                                ("i" "i") 0.003279763857002296,
                                ("w" "i") 0.001147917349950804,
                                ("g" "r") 0.001721876024926205,
                                ("a" "a") 0.006477533617579534,
                                ("ä" "ä") 0.002049852410626435,
                                ("l" "t") 0.001803870121351263,
                                ("i" "t") 0.008527386028205968,
                                ("k" "y") 0.002377828796326664,
                                ("k" "k") 0.001639881928501148,
                                ("e" "d") 0.004509675303378157,
                                ("x" "t") 0.001311905542800918,
                                ("q" "u") 0.00221384060347655,
                                ("ä" "l") 6.559527714004593E-4,
                                ("n" "e") 0.004837651689078386,
                                ("n" "i") 0.003607740242702525,
                                ("c" "r") 0.001229911446375861,
                                ("u" "r") 0.001721876024926205,
                                ("e" "a") 0.003607740242702525,
                                ("e" "n") 0.01238110856018367,
                                ("i" "k") 0.002459822892751722,
                                ("b" "e") 0.001475893735651033,
                                ("e" "x") 0.00221384060347655,
                                ("m" "a") 0.007707445063955395,
                                ("l" "m") 6.559527714004593E-4,
                                ("f" "s") 7.379468678255166E-4,
                                ("y" "t") 0.001229911446375861,
                                ("o" "l") 0.004017710724827812,
                                ("r" "i") 0.005575598556903903,
                                ("i" "a") 0.003033781567727124,
                                ("n" "g") 0.004755657592653329,
                                ("e" "m") 0.004755657592653329,
                                ("a" "u") 7.379468678255166E-4,
                                ("t" "t") 0.005001639881928501,
                                ("e" "w") 0.001557887832076091,
                                ("k" "a") 0.003689734339127583,
                                ("u" "k") 0.001393899639225976,
                                ("t" "r") 0.003033781567727124,
                                ("n" "o") 0.00819940964250574,
                                ("m" "y") 0.001065923253525746,
                                ("a" "v") 0.002377828796326664,
                                ("o" "n") 0.01434896687438504,
                                ("w" "o") 8.19940964250574E-4,
                                ("u" "m") 0.005903574942604133,
                                ("a" "l") 0.004919645785503444,
                                ("a" "y") 8.19940964250574E-4,
                                ("ä" "n") 0.00188586421777632,
                                ("e" "v") 0.003689734339127583,
                                ("e" "k") 0.001065923253525746,
                                ("c" "h") 0.004263693014102985,
                                ("r" "c") 7.379468678255166E-4,
                                ("o" "s") 0.004837651689078386,
                                ("a" "s") 0.006477533617579534,
                                ("g" "h") 7.379468678255166E-4,
                                ("p" "l") 0.002295834699901607,
                                ("f" "a") 9.019350606756314E-4,
                                ("o" "t") 0.004263693014102985,
                                ("i" "v") 7.379468678255166E-4,
                                ("d" "d") 0.002295834699901607,
                                ("c" "u") 0.001639881928501148,
                                ("o" "p") 0.001393899639225976,
                                ("r" "o") 0.00565759265332896,
                                ("m" "o") 0.005821580846179075,
                                ("a" "n") 0.009675303378156773,
                                ("n" "p") 0.001393899639225976,
                                ("m" "i") 0.005821580846179075,
                                ("n" "n") 0.004181698917677927,
                                ("p" "e") 0.002049852410626435,
                                ("i" "z") 0.001147917349950804,
                                ("s" "y") 6.559527714004593E-4,
                                ("k" "i") 0.002541816989176779,
                                ("y" "m") 6.559527714004593E-4,
                                ("b" "c") 7.379468678255166E-4,
                                ("u" "l") 0.003853722531977698,
                                ("r" "r") 7.379468678255166E-4,
                                ("n" "t") 0.009265332896031486,
                                ("y" "ö") 0.001147917349950804,
                                ("f" "u") 0.001311905542800918,
                                ("g" "e") 0.002869793374877009,
                                ("e" "h") 9.019350606756314E-4,
                                ("l" "l") 0.009019350606756314,
                                ("u" "i") 6.559527714004593E-4,
                                ("n" "ä") 6.559527714004593E-4,
                                ("u" "t") 0.004263693014102985,
                                ("d" "r") 0.001147917349950804,
                                ("h" "t") 7.379468678255166E-4,
                                ("r" "a") 0.007789439160380453,
                                ("n" "u") 0.00188586421777632,
                                ("c" "o") 0.007051492292554936,
                                ("o" "f") 0.001229911446375861,
                                ("l" "a") 0.00787143325680551,
                                ("t" "s") 0.002459822892751722,
                                ("p" "a") 0.004181698917677927,
                                ("v" "a") 0.004673663496228272,
                                ("k" "s") 0.002377828796326664,
                                ("w" "n") 0.001229911446375861,
                                ("b" "l") 0.003197769760577238,
                                ("p" "r") 0.005247622171203673,
                                ("t" "u") 0.00409970482125287,
                                ("u" "s") 0.005739586749754018,
                                ("r" "m") 7.379468678255166E-4,
                                ("e" "s") 0.01598884880288619,
                                ("b" "s") 9.019350606756314E-4,
                                ("k" "o") 0.003361757953427353,
                                ("y" "e") 9.019350606756314E-4,
                                ("t" "e") 0.01664480157428665,
                                ("s" "g") 0.001229911446375861,
                                ("r" "v") 5.739586749754018E-4,
                                ("s" "k") 9.839291571006887E-4,
                                ("w" "f") 0.001147917349950804,
                                ("a" "c") 0.004427681206953099,
                                ("s" "s") 0.007625450967530338,
                                ("p" "p") 0.004591669399803214,
                                ("y" "s") 5.739586749754018E-4,
                                ("p" "f") 0.003197769760577238,
                                ("k" "e") 0.006559527714004592,
                                ("u" "n") 0.005903574942604133,
                                ("i" "e") 0.004837651689078386,
                                ("k" "n") 0.001229911446375861,
                                ("ä" "y") 5.739586749754018E-4,
                                ("d" "e") 0.008527386028205968,
                                ("v" "i") 0.004017710724827812,
                                ("j" "o") 0.001967858314201378,
                                ("m" "p") 0.00409970482125287,
                                ("s" "n") 0.00188586421777632,
                                ("v" "e") 0.005247622171203673,
                                ("c" "k") 7.379468678255166E-4,
                                ("f" "n") 0.001065923253525746,
                                ("k" "ä") 0.001311905542800918,
                                ("f" "l") 0.001229911446375861,
                                ("l" "y") 0.001557887832076091,
                                ("p" "s") 6.559527714004593E-4,
                                ("o" "u") 0.004919645785503444,
                                ("n" "y") 9.839291571006887E-4,
                                ("p" "u") 0.003443752049852411,
                                ("c" "c") 0.002787799278451951,
                                ("a" "b") 0.002705805182026894,
                                ("m" "ä") 0.001065923253525746,
                                ("b" "t") 0.001147917349950804,
                                ("s" "i") 0.01098720892095769,
                                ("i" "x") 9.839291571006887E-4,
                                ("s" "h") 0.001147917349950804,
                                ("r" "u") 0.002131846507051492,
                                ("c" "s") 0.001065923253525746,
                                ("o" "m") 0.006149557231879305,
                                ("m" "b") 6.559527714004593E-4,
                                ("f" "i") 0.004181698917677927,
                                ("u" "d") 5.739586749754018E-4,
                                ("f" "o") 0.002459822892751722,
                                ("m" "u") 0.003197769760577238,
                                ("m" "m") 0.004755657592653329,
                                ("a" "p") 0.005165628074778616,
                                ("i" "d") 0.002787799278451951,
                                ("b" "u") 0.001065923253525746,
                                ("l" "ä") 0.002377828796326664,
                                ("b" "b") 0.00377172843555264,
                                ("j" "n") 9.019350606756314E-4,
                                ("v" "ä") 8.19940964250574E-4,
                                ("k" "u") 0.002131846507051492,
                                ("l" "o") 0.004017710724827812,
                                ("b" "i") 0.002131846507051492,
                                ("s" "a") 0.003607740242702525,
                                ("p" "i") 0.003279763857002296,
                                ("j" "u") 0.001229911446375861,
                                ("j" "p") 7.379468678255166E-4,
                                ("o" "o") 0.002131846507051492,
                                ("g" "g") 6.559527714004593E-4,
                                ("e" "t") 0.00754345687110528,
                                ("c" "l") 0.001311905542800918,
                                ("i" "f") 0.001065923253525746,
                                ("d" "i") 0.002787799278451951,
                                ("n" "a") 0.003115775664152181,
                                ("a" "r") 0.009511315185306658,
                                ("t" "c") 9.839291571006887E-4,
                                ("u" "a") 0.001393899639225976,
                                ("e" "c") 0.003115775664152181,
                                ("i" "m") 0.003443752049852411,
                                ("b" "a") 9.019350606756314E-4,
                                ("r" "d") 7.379468678255166E-4},
                               :trigram-distribution
                               {("n" "t" "e") 0.00408028231142479,
                                ("e" "r" "e") 0.00176444640494045,
                                ("a" "i" "s") 0.001213056903396559,
                                ("a" "s" "t") 0.001433612704014116,
                                ("a" "r" "a") 0.001874724305249228,
                                ("r" "e" "m") 0.002426113806793119,
                                ("u" "m" "e") 0.001213056903396559,
                                ("p" "a" "r") 0.002536391707101897,
                                ("o" "r" "e") 0.001433612704014116,
                                ("u" "s" "e") 0.002756947507719453,
                                ("e" "f" "i") 0.001102779003087781,
                                ("o" "w" "f") 0.001543890604322894,
                                ("o" "l" "l") 0.002205558006175562,
                                ("d" "r" "e") 0.001213056903396559,
                                ("c" "r" "e") 0.001213056903396559,
                                ("u" "m" "m") 0.0035288928098809,
                                ("p" "u" "t") 0.001213056903396559,
                                ("o" "u" "s") 0.001213056903396559,
                                ("t" "i" "o") 0.003970004411116012,
                                ("ä" "ä" "n") 0.001323334803705337,
                                ("d" "d" "r") 0.001323334803705337,
                                ("o" "w" "n") 0.001654168504631672,
                                ("i" "o" "n") 0.005403617115130128,
                                ("s" "e" "t") 0.001102779003087781,
                                ("v" "i" "e") 0.002205558006175562,
                                ("f" "r" "e") 0.001433612704014116,
                                ("a" "v" "a") 0.001102779003087781,
                                ("i" "s" "i") 0.002205558006175562,
                                ("l" "e" "v") 0.001323334803705337,
                                ("a" "r" "t") 0.001102779003087781,
                                ("e" "s" "s") 0.004190560211733569,
                                ("t" "i" "s") 0.001433612704014116,
                                ("a" "c" "t") 0.002867225408028231,
                                ("p" "o" "s") 0.001102779003087781,
                                ("v" "e" "r") 0.001874724305249228,
                                ("b" "b" "b") 9.925011027790032E-4,
                                ("u" "n" "t") 0.001433612704014116,
                                ("o" "d" "o") 0.001874724305249228,
                                ("n" "g" "e") 0.001213056903396559,
                                ("a" "p" "h") 0.001102779003087781,
                                ("l" "u" "m") 0.001102779003087781,
                                ("k" "i" "n") 0.001102779003087781,
                                ("a" "l" "i") 0.001102779003087781,
                                ("y" "l" "l") 9.925011027790032E-4,
                                ("f" "o" "r") 0.002315835906484341,
                                ("u" "s" "t") 0.001213056903396559,
                                ("t" "i" "t") 9.925011027790032E-4,
                                ("o" "u" "t") 9.925011027790032E-4,
                                ("w" "f" "l") 0.001433612704014116,
                                ("i" "s" "t") 0.002646669607410675,
                                ("h" "a" "n") 0.00176444640494045,
                                ("e" "a" "d") 9.925011027790032E-4,
                                ("l" "e" "e") 9.925011027790032E-4,
                                ("u" "n" "k") 0.002205558006175562,
                                ("g" "r" "a") 0.001433612704014116,
                                ("c" "t" "i") 0.001654168504631672,
                                ("t" "ä" "ä") 9.925011027790032E-4,
                                ("l" "a" "k") 0.001102779003087781,
                                ("u" "l" "u") 0.001213056903396559,
                                ("i" "g" "q") 0.001102779003087781,
                                ("a" "i" "k") 0.001102779003087781,
                                ("p" "p" "p") 0.001213056903396559,
                                ("p" "r" "o") 0.003970004411116012,
                                ("t" "i" "e") 0.001213056903396559,
                                ("o" "c" "u") 0.001323334803705337,
                                ("a" "s" "s") 0.001654168504631672,
                                ("a" "p" "i") 0.001654168504631672,
                                ("m" "e" "n") 0.003749448610498456,
                                ("r" "s" "i") 0.001433612704014116,
                                ("v" "o" "i") 9.925011027790032E-4,
                                ("u" "s" "i") 0.001323334803705337,
                                ("y" "o" "u") 0.001433612704014116,
                                ("c" "o" "d") 0.001543890604322894,
                                ("m" "o" "n") 0.001323334803705337,
                                ("s" "s" "ä") 0.001102779003087781,
                                ("t" "r" "e") 0.001543890604322894,
                                ("n" "p" "u") 0.001102779003087781,
                                ("n" "k" "n") 0.001543890604322894,
                                ("p" "e" "r") 9.925011027790032E-4,
                                ("p" "r" "e") 0.002205558006175562,
                                ("l" "l" "ä") 0.001985002205558006,
                                ("m" "e" "t") 0.001102779003087781,
                                ("c" "o" "m") 0.003087781208645787,
                                ("a" "t" "i") 0.003859726510807234,
                                ("a" "t" "e") 0.001985002205558006,
                                ("u" "a" "t") 0.001102779003087781,
                                ("e" "n" "d") 0.001102779003087781,
                                ("a" "t" "t") 9.925011027790032E-4,
                                ("a" "i" "n") 0.001985002205558006,
                                ("e" "n" "t") 0.004300838112042347,
                                ("i" "t" "ä") 0.001433612704014116,
                                ("m" "m" "a") 0.003418614909572122,
                                ("f" "i" "l") 0.001654168504631672,
                                ("s" "t" "o") 0.001323334803705337,
                                ("i" "i" "n") 0.002095280105866784,
                                ("a" "p" "p") 0.001433612704014116,
                                ("i" "n" "p") 0.001433612704014116,
                                ("t" "a" "b") 9.925011027790032E-4,
                                ("a" "r" "e") 0.001323334803705337,
                                ("n" "t" "s") 9.925011027790032E-4,
                                ("n" "o" "w") 0.004190560211733569,
                                ("o" "d" "e") 0.001543890604322894,
                                ("e" "l" "i") 0.001985002205558006,
                                ("e" "v" "i") 0.001323334803705337,
                                ("g" "i" "o") 0.002095280105866784,
                                ("l" "l" "a") 0.003418614909572122,
                                ("u" "t" "t") 0.001102779003087781,
                                ("a" "m" "e") 0.002205558006175562,
                                ("e" "c" "t") 9.925011027790032E-4,
                                ("a" "d" "d") 0.002867225408028231,
                                ("i" "t" "h") 9.925011027790032E-4,
                                ("v" "a" "i") 0.001102779003087781,
                                ("k" "s" "i") 0.001213056903396559,
                                ("e" "t" "t") 0.002315835906484341,
                                ("t" "t" "a") 0.001433612704014116,
                                ("h" "a" "t") 0.002867225408028231,
                                ("b" "i" "g") 0.001985002205558006,
                                ("t" "e" "n") 0.001323334803705337,
                                ("b" "r" "e") 9.925011027790032E-4,
                                ("r" "e" "s") 0.002977503308337009,
                                ("i" "e" "l") 0.001323334803705337,
                                ("e" "n" "e") 0.001213056903396559,
                                ("a" "v" "e") 0.00176444640494045,
                                ("m" "a" "r") 0.002756947507719453,
                                ("c" "a" "r") 0.001543890604322894,
                                ("s" "e" "n") 9.925011027790032E-4,
                                ("n" "e" "s") 0.001102779003087781,
                                ("e" "m" "i") 0.001102779003087781,
                                ("h" "e" "n") 0.00176444640494045,
                                ("l" "i" "s") 0.00176444640494045,
                                ("i" "n" "k") 0.001102779003087781,
                                ("f" "r" "o") 0.001102779003087781,
                                ("t" "h" "e") 0.008491398323775915,
                                ("k" "n" "o") 0.001654168504631672,
                                ("r" "e" "v") 0.001102779003087781,
                                ("i" "n" "g") 0.004741949713277459,
                                ("e" "s" "t") 0.006837229819144243,
                                ("i" "l" "l") 0.003639170710189678,
                                ("i" "t" "i") 9.925011027790032E-4,
                                ("s" "c" "c") 0.00176444640494045,
                                ("o" "i" "n") 0.001654168504631672,
                                ("r" "a" "t") 0.00176444640494045,
                                ("i" "e" "w") 0.001985002205558006,
                                ("t" "a" "i") 0.001543890604322894,
                                ("t" "u" "o") 0.001213056903396559,
                                ("l" "e" "a") 0.001323334803705337,
                                ("i" "t" "t") 0.001102779003087781,
                                ("a" "b" "l") 0.003418614909572122,
                                ("n" "n" "n") 0.001102779003087781,
                                ("o" "i" "s") 0.001102779003087781,
                                ("t" "i" "m") 0.001543890604322894,
                                ("h" "a" "s") 9.925011027790032E-4,
                                ("g" "q" "u") 0.001102779003087781,
                                ("i" "d" "e") 0.001323334803705337,
                                ("o" "u" "l") 0.001102779003087781,
                                ("o" "s" "t") 0.001874724305249228,
                                ("r" "o" "m") 0.001543890604322894,
                                ("e" "t" "a") 0.001543890604322894,
                                ("s" "s" "i") 0.002095280105866784,
                                ("i" "c" "s") 9.925011027790032E-4,
                                ("o" "s" "g") 0.001433612704014116,
                                ("n" "o" "t") 0.003087781208645787,
                                ("n" "i" "i") 0.001102779003087781,
                                ("v" "e" "l") 0.001323334803705337,
                                ("o" "u" "n") 0.001213056903396559,
                                ("e" "r" "s") 0.001874724305249228,
                                ("m" "o" "u") 0.001323334803705337,
                                ("s" "i" "i") 0.001543890604322894,
                                ("c" "o" "n") 0.001874724305249228,
                                ("r" "e" "n") 9.925011027790032E-4,
                                ("l" "a" "s") 0.001543890604322894,
                                ("i" "n" "t") 0.00408028231142479,
                                ("a" "a" "n") 0.002646669607410675,
                                ("s" "i" "n") 0.004300838112042347,
                                ("s" "t" "i") 0.004190560211733569,
                                ("b" "t" "o") 0.001323334803705337,
                                ("a" "t" "a") 0.002205558006175562,
                                ("t" "t" "e") 0.001874724305249228,
                                ("i" "s" "s") 0.001874724305249228,
                                ("t" "i" "c") 0.001102779003087781,
                                ("t" "t" "ä") 0.001543890604322894,
                                ("v" "a" "r") 9.925011027790032E-4,
                                ("m" "u" "n") 9.925011027790032E-4,
                                ("s" "i" "o") 0.001543890604322894,
                                ("l" "o" "g") 0.001213056903396559,
                                ("t" "a" "t") 0.001985002205558006,
                                ("o" "n" "t") 0.001543890604322894,
                                ("i" "m" "i") 0.001654168504631672,
                                ("m" "a" "s") 9.925011027790032E-4,
                                ("i" "s" "e") 0.001654168504631672,
                                ("e" "m" "o") 0.002205558006175562,
                                ("t" "e" "s") 0.005624172915747684,
                                ("e" "l" "l") 0.001323334803705337,
                                ("k" "e" "y") 0.003087781208645787,
                                ("t" "o" "i") 0.001433612704014116,
                                ("s" "s" "a") 0.001543890604322894,
                                ("h" "a" "r") 0.001102779003087781,
                                ("m" "i" "n") 0.001213056903396559,
                                ("r" "i" "n") 0.001323334803705337,
                                ("h" "a" "v") 9.925011027790032E-4,
                                ("k" "a" "a") 0.001213056903396559,
                                ("c" "o" "u") 0.001213056903396559,
                                ("a" "r" "i") 0.002205558006175562,
                                ("s" "t" "r") 0.002646669607410675,
                                ("s" "u" "m") 0.003970004411116012,
                                ("r" "a" "c") 0.002646669607410675,
                                ("s" "c" "h") 0.001102779003087781,
                                ("q" "u" "e") 0.002867225408028231,
                                ("b" "l" "e") 0.003198059108954566,
                                ("n" "t" "a") 0.001654168504631672,
                                ("s" "t" "a") 0.00529333921482135,
                                ("d" "a" "t") 0.002095280105866784,
                                ("t" "a" "r") 0.001102779003087781,
                                ("c" "h" "a") 0.002977503308337009,
                                ("d" "e" "v") 0.001543890604322894,
                                ("t" "e" "r") 0.005072783414203794,
                                ("i" "e" "s") 0.001102779003087781,
                                ("r" "a" "n") 0.001433612704014116,
                                ("d" "i" "s") 0.001102779003087781,
                                ("s" "i" "t") 0.001102779003087781,
                                ("l" "i" "n") 0.00176444640494045,
                                ("n" "a" "m") 0.001874724305249228,
                                ("a" "n" "g") 9.925011027790032E-4,
                                ("s" "e" "r") 0.001433612704014116,
                                ("e" "e" "t") 0.001874724305249228,
                                ("s" "s" "e") 9.925011027790032E-4,
                                ("t" "r" "i") 9.925011027790032E-4,
                                ("f" "i" "x") 0.001323334803705337,
                                ("r" "i" "s") 9.925011027790032E-4,
                                ("t" "a" "a") 0.001874724305249228,
                                ("i" "n" "e") 0.002315835906484341,
                                ("v" "a" "l") 0.001213056903396559,
                                ("e" "v" "e") 0.001985002205558006,
                                ("i" "o" "s") 0.001654168504631672,
                                ("k" "s" "e") 9.925011027790032E-4,
                                ("s" "e" "s") 0.003087781208645787,
                                ("l" "e" "s") 0.001323334803705337,
                                ("m" "p" "i") 0.001102779003087781,
                                ("a" "r" "y") 0.001654168504631672,
                                ("r" "a" "p") 0.001102779003087781,
                                ("t" "h" "a") 0.002205558006175562,
                                ("i" "m" "p") 9.925011027790032E-4,
                                ("e" "r" "y") 0.001874724305249228,
                                ("a" "n" "d") 0.003198059108954566,
                                ("m" "i" "s") 0.002536391707101897,
                                ("r" "e" "e") 0.00176444640494045,
                                ("i" "t" "a") 9.925011027790032E-4,
                                ("c" "h" "e") 0.001654168504631672,
                                ("l" "l" "e") 0.001654168504631672,
                                ("r" "e" "c") 0.001543890604322894,
                                ("e" "x" "t") 0.00176444640494045,
                                ("a" "k" "e") 0.001874724305249228,
                                ("r" "e" "a") 0.001323334803705337,
                                ("l" "e" "t") 0.001102779003087781,
                                ("h" "e" "r") 0.002315835906484341,
                                ("a" "p" "a") 0.001102779003087781,
                                ("u" "e" "r") 0.00176444640494045,
                                ("c" "t" "e") 0.001102779003087781,
                                ("m" "o" "v") 0.001102779003087781,
                                ("t" "e" "x") 0.00176444640494045,
                                ("t" "o" "d") 0.001874724305249228,
                                ("e" "r" "a") 0.002646669607410675,
                                ("s" "n" "o") 0.002426113806793119,
                                ("e" "e" "n") 0.001102779003087781,
                                ("e" "f" "e") 0.001543890604322894,
                                ("a" "l" "l") 0.00176444640494045,
                                ("t" "u" "l") 0.001213056903396559,
                                ("t" "i" "n") 0.002205558006175562,
                                ("t" "h" "i") 9.925011027790032E-4,
                                ("d" "e" "f") 0.003418614909572122,
                                ("o" "v" "e") 0.001102779003087781,
                                ("i" "l" "e") 0.001543890604322894,
                                ("o" "m" "p") 0.002426113806793119,
                                ("f" "l" "a") 0.001323334803705337},
                               :character-distribution
                               {"d" 0.02747324458365962,
                                "n" 0.07458888018794049,
                                "z" 0.001500913599582354,
                                "w" 0.00835291046724093,
                                "s" 0.07328373792743409,
                                "f" 0.01637953536935526,
                                "e" 0.1045418950665623,
                                "q" 0.003001827199164709,
                                "p" 0.03230227094753328,
                                "j" 0.00828765335421561,
                                "x" 0.002936570086139389,
                                "v" 0.01376925084834247,
                                "a" 0.08535630383711824,
                                "t" 0.08607413208039676,
                                "i" 0.0809188201513965,
                                "k" 0.0261028452101279,
                                "b" 0.02022970503784913,
                                "r" 0.04809449229966066,
                                "y" 0.0165100495954059,
                                "g" 0.01487862176977291,
                                "l" 0.04633255024797703,
                                "u" 0.03713129731140694,
                                "ä" 0.01370399373531715,
                                "h" 0.02257896110676064,
                                "ö" 0.002153484729835552,
                                "m" 0.03889323936309058,
                                "o" 0.06767162620725659,
                                "c" 0.02695118767945706}})
